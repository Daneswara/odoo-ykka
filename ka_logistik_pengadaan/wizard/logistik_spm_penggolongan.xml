<odoo>
	<data>
		<record model="ir.ui.view" id="view_penggolongan_form">
			<field name="name">logistik.spm.penggolongan.form</field>
			<field name="model">logistik.spm.penggolongan</field>
			<field name="arch" type="xml">
				<form string="Penggolongan SPM">
					<field name="state" invisible="1"/>
					<field name="pengadaan" invisible="1"/>
					<field name="line_ids" nolabel="1">
						<tree create="false" delete="false" editable="bottom">
							<field name="spm_id" readonly="1"/>
							<field name="product_id" readonly="1"/>
							<field name="product_description" readonly="1"/>
							<field name="unit_id"/>
							<field name="kuantum" readonly="1"/>
							<field name="pkrat_id" readonly="1"/>
						</tree>
					</field>
					<group string="Realilasai SPM:">
						<field name="golongan" style="width: 20%%" attrs="{'invisible': [('pengadaan', '=', 'RP')]}"/>
						<field name="partner_id" options="{'no_create': True}" domain="[('supplier', '=', True)]" attrs="{'invisible': [('golongan','not in', ('agen', 'import'))]}" style="width: 50%%"/>
					</group>
					<footer>
						<button name="action_open_form_repeat" string="Repeat" type="object" attrs="{'invisible': [('golongan','!=','repeat')]}" class="oe_button oe_form_button_save oe_highlight"/>
						<button name="action_golongan" string="Buat PO" type="object" attrs="{'invisible': [('pengadaan','=','RD')]}" class="oe_button oe_form_button_save oe_highlight"/>
						<button name="action_golongan" string="Simpan" type="object" attrs="{'invisible': ['|',('golongan','=','repeat'),('pengadaan','=','RP')]}" class="oe_button oe_form_button_save oe_highlight"/> atau<button string="Batal" class="oe_link" special="cancel" />
					</footer>
				</form>
			</field>
		</record>
		
		<record model="ir.ui.view" id="view_repeat_form">
			<field name="name">logistik.spm.repeat.form</field>
			<field name="model">logistik.spm.penggolongan</field>
			<field name="arch" type="xml">
				<form string="Penggolongan SPM">
					<field name="state" invisible="1"/>
					<field name="line_ids" nolabel="1">
						<tree create="false" delete="false" editable="buttom">
							<field name="spm_id" readonly="1"/>
							<field name="product_id" readonly="1"/>
							<field name="unit_id" readonly="1"/>
							<field name="kuantum" readonly="1"/>
							<field name="pkrat_id" readonly="1"/>
							<field name="repeat_order_id" options="{'no_create': True}" context="{'product_id': product_id}"/>
							<field name="partner_id"/>
							<field name="price_unit"/>
						</tree>
					</field>
					<field name="golongan" readonly="1"/>
					<footer>
						<button name="action_golongan" string="Simpan" type="object" class="oe_button oe_form_button_save oe_highlight"/> atau<button string="Batal" class="oe_link" special="cancel" />
					</footer>
				</form>
			</field>
		</record>

		<act_window 
			name="Penggolongan SPM"
			res_model="logistik.spm.penggolongan"
			src_model="logistik.spm.lines"
			view_mode="form"
			groups="ka_logistik_spm.group_spm_direksi"
			target="new"
			multi="True"
			context="{'pengadaan':'RD'}"
			id="action_view_penggolongan"/>

		<act_window 
			name="Transfer SPM Menjadi PO"
			res_model="logistik.spm.penggolongan"
			src_model="logistik.spm.lines"
			view_mode="form"
			groups="ka_logistik_spm.group_spm_pabrik"
			target="new"
			multi="True"
			context="{'pengadaan':'RP'}"
			id="action_spm_to_purchase"/>
	</data>
</odoo>