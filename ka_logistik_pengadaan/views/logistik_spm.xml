<odoo>
	<data>
		<!--PENGOLONGAN SPM-->
		<record model="ir.ui.view" id="view_logistik_spm_lines_penggolongan_tree">
			<field name="name">logistik.spm.lines.approve.tree</field>
			<field name="model">logistik.spm.lines</field>
			<field name="type">tree</field>
			<field name="arch" type="xml">
				<tree string="Pengelolaan Detail SPM" colors="grey:state in ('tender', 'draftsp');blue:state=='approved'" create="false" delete="false">
					<field name="spm_id"/>
					<field name="pengajuan_id"/>
					<field name="stasiun_id"/>
					<button name="action_open_histori_harga" type="object" string="Histori Harga" context="{'product_id': product_id}" icon="fa-search"/>
					<field name="product_id" invisible="1"/>
					<field name="name_spec"/>
					<!-- <field name="product_id"/> -->
					<!-- <field name="product_desc"/> -->
					<field name="doc_count" invisible="1"/>
					<button name="attachment_tree_view" type="object" help="Buka Lampiran" icon="fa-paperclip" attrs="{'invisible':[('doc_count','&lt;', 1)]}"/>
					<field name="kuantum_sp"/>
					<field name="unit_id"/>
					<field name="tgl_minta"/>
					<field name="pkrat_id"/>
					<field name="company_id" groups="base.group_multi_company"/>
					<field name="state"/>
					<field name="category" invisible="1"/>
					<field name="account_id" invisible="1"/>
					<button name="%(ka_logistik_spm.action_logistik_spm_cancel)d" help="Batalkan Barang ini" type="action" icon="fa-times-circle"/>
				</tree>
			</field>
		</record>
		
		<record model="ir.ui.view" id="view_logistik_spm_lines_history_harga_tree">
			<field name="name">logistik.spm.lines.hostory.harga.tree</field>
			<field name="model">logistik.spm.lines</field>
			<field name="inherit_id" ref="ka_logistik_spm.view_logistik_spm_lines_tree"/>
			<field name="arch" type="xml">
				<field name="name_spec" position="after">
					<button 
						name="action_open_histori_harga" 
						groups="purchase.group_purchase_user" 
						type="object" string="Histori Harga" 
						icon="fa-search"/>				
				</field>
			</field>
		</record>
		
		<record model="ir.ui.view" id="view_logistik_spm_lines_pengglongan_filter">
			<field name="name">logistik.spm.lines.approve.filter</field>
			<field name="model">logistik.spm.lines</field>
			<field name="type">search</field>
			<field name="arch" type="xml">
				<search string="Pencarian SPM">
					<field name="spm_id" domain="[('state', 'not in', ('draft', 'wait', 'validated', 'reject', 'spm'))]"/>
					<field name="pengajuan_id" domain="[('state', 'not in', ('draft', 'wait', 'validated', 'reject', 'spm'))]"/>
					<field name="product_id"/>
					<field name="company_id" groups="base.group_multi_company"/>
					<group expand="0" string="Filter Penggolongan">
						<filter name="spm_none" string="Belum Digolongkan" domain="[('golongan','=','none')]"/>
						<filter name="spm_import" string="Import" domain="[('golongan','=','import')]"/>
						<filter name="spm_agen" string="Agen" domain="[('golongan','=','agen')]"/>
						<filter name="spm_tender" string="Tender" domain="[('golongan','=','tender')]"/>
						<filter name="spm_import" string="Import" domain="[('golongan','=','import')]"/>
	    	   		</group>
				</search>
			</field>
		</record>

		<record model="ir.actions.act_window" id="action_logistik_spm_dir_lines_tree">
			<field name="name">Pemeliharaan SPM</field>
			<field name="res_model">logistik.spm.lines</field>
			<field name="view_type">form</field>
			<field name="view_mode">form,tree</field>
			<field name="view_id" ref="view_logistik_spm_lines_penggolongan_tree"/>
			<field name="search_view_id" ref="view_logistik_spm_lines_pengglongan_filter"/>
			<field name="context">{"search_default_spm_none":1}</field>
			<field name="domain">[('state', 'in', ['approved', 'tender', 'draftsp']), ('pengadaan', '=', 'RD')]</field>
		</record>
	</data>
</odoo>