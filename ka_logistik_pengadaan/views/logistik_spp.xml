<odoo>
	<data>
		<record model="ir.ui.view" id="view_logistik_spp_filter">
			<field name="name">logistik.spp.filter</field>
			<field name="model">logistik.spp</field>
			<field name="type">search</field>
			<field name="arch" type="xml">
				<search string="Pencarian">
					<field name="no_spp"/>
					<field name="spm_id"/>
					<field name="partner_id"/>
					<field name="tender_id"/>
					<group expand="0" string="Status SPP">
						<filter name="draft" string="Draft" domain="[('state','=','draft')]"/>
						<filter name="sent" string="Terkirim/Tercetak" domain="[('state','=','sent')]"/>
						<filter name="confirm" string="Harga Sudah Diterima" domain="[('state','=','confirm')]"/>
						<filter name="order" string="Sudah SP" domain="[('state','=','order')]"/>
						<filter name="cancel" string="Batal" domain="[('state','=','cancel')]"/>
					</group>
					<group expand="0" string="Golongan">
						<filter name="agen" string="Agen" domain="[('golongan','=','agen')]"/>
						<filter name="tender" string="Tender" domain="[('golongan','=','tender')]"/>
						<filter name="repeat" string="Repeat" domain="[('golongan','=','repeate')]"/>
						<filter name="import" string="Import" domain="[('golongan','=','import')]"/>
					</group>
				</search>
			</field>
		</record>

		<record model="ir.ui.view" id="view_logistik_spp_tree">
			<field name="name">logistik.spp.tree</field>
			<field name="model">logistik.spp</field>
			<field name="type">tree</field>
			<field name="arch" type="xml">
				<tree string="Pengelolaan SPP" colors="grey:state=='confirm';blue:state=='draft'" create="false" delete="false" >
					<field name="tender_id"/>
					<field name="no_spp"/>
					<field name="tanggal"/>
					<field name="spm_id"/>
					<field name="tanggal_spm"/>
					<field name="company_id" invisible="1"/>
					<field name="delivery_to"/>
					<field name="partner_id"/>
					<field name="no_penawaran"/>
					<field name="total"/>
					<field name="golongan"/>
					<field name="state"/>
				</tree>
			</field>
		</record>

		<record model="ir.ui.view" id="view_logistik_spp_tender_form">
			<field name="name">logistik.spp.tender.form</field>
			<field name="model">logistik.spp</field>
			<field name="priority" eval="100"/>
			<field name="type">form</field>
			<field name="arch" type="xml">
				<form string="Pengelolaan SPP">
					<sheet class="oe_form_sheet_width_wider">
						<group>
							<group>
								<field name="state" invisible="1"/>
								<field name="company_id" invisible="1"/>
								<field name="no_spp" readonly="1"/>
								<field name="tanggal" readonly="1"/>
								<field name="delivery_to" readonly="1"/>
								<separator/>
							</group>
							<group>
								<field name="partner_id" readonly="1"/>
								<field name="no_penawaran" class="oe_text_upper" required="1"/>
								<field name="tgl_penawaran" required="1"/>
							</group>
						</group>
						<group>
							<field name="line_ids" colspan="6" nolabel="1" attrs="{'readonly':[('state','in', ['wait', 'confirm', 'order', 'cancel'])]}">
								<tree default_order='product_id' create="false" delete="false" editable="bottom">
									<button name="action_open_histori_harga" type="object" string="Histori Harga" context="{'product_id': product_id}" icon="fa-history"/>
									<field name="product_id" readonly="1" default_order="1"/>
									<field name="spesifikasi"/>
									<field name="unit_id" readonly="1"/>
									<field name="penyerahan" string="Tgl. Diminta"/>
									<field name="waktu_kirim" string="Waktu"/>
									<field name="kuantum" readonly="1"/>
									<field name="kuantum_sp" invisible="1"/>
									<field name="penawaran" data-inputmask="'alias': 'decimal', 'groupSeparator': '.', 'radixPoint':',', 'autoGroup': true"/>
									<field name="total_tawar"/>
									<field name="keterangan"/>
								</tree>
							</field>
							<group class="oe_subtotal_footer oe_right">
								<field name="total_spph" widget="monetary" class="oe_subtotal_footer_separator" />
							</group>
						</group>
					</sheet>
					<footer>
						<button name="write" class="oe_button oe_form_button_save oe_highlight" type="object" string="Simpan"/> atau<button name="cancel" string="Batal" special="cancel" class="oe_link"/> 
					</footer>
				</form>
			</field>
		</record>

		<record model="ir.ui.view" id="view_logistik_spp_tender_nego_form">
			<field name="name">logistik.spp.tender.nego.form</field>
			<field name="model">logistik.spp</field>
			<field name="priority" eval="100"/>
			<field name="type">form</field>
			<field name="arch" type="xml">
				<form string="Pengelolaan SPP">
					<sheet class="oe_form_sheet_width_wider">
						<group>
							<group>
								<field name="state" invisible="1"/>
								<field name="company_id" invisible="1"/>
								<field name="no_spp" readonly="1"/>
								<field name="tanggal" readonly="1"/>
								<field name="delivery_to" readonly="1"/>
								<separator/>
							</group>
							<group>
								<field name="partner_id" readonly="1"/>
								<field name="no_penawaran" readonly="1"/>
								<field name="tgl_penawaran" readonly="1"/>
							</group>
						</group>
						<group>
							<field name="line_ids" colspan="6" nolabel="1" attrs="{'readonly':[('state','in', ['confirm', 'order', 'cancel'])]}">
								<tree default_order='product_id' create="false" delete="false" editable="bottom">
									<button name="action_open_histori_harga" type="object" string="Histori Harga" context="{'product_id': product_id}" icon="fa-search"/>
									<field name="product_id" readonly="1" default_order="1"/>
									<field name="spesifikasi"/>
									<field name="penyerahan" string="Tgl. Diminta" readonly="1"/>
									<field name="waktu_kirim" string="Waktu"/>
									<field name="kuantum" readonly="1"/>
									<field name="unit_id" readonly="1"/>
									<field name="penawaran" readonly="1"/>
									<field name="harga" data-inputmask="'alias': 'decimal', 'groupSeparator': '.', 'radixPoint':',', 'autoGroup': true"/>
									<field name="total_harga"/>
									<field name="keterangan"/>
								</tree>
							</field>
							<group class="oe_subtotal_footer oe_right">
								<field name="total" widget="monetary" class="oe_subtotal_footer_separator" />
							</group>
						</group>
					</sheet>
					<footer>
						<button name="write" class="oe_button oe_form_button_save oe_highlight" type="object" string="Simpan"/> or<button name="cancel" string="Batal" special="cancel" class="oe_link"/> 
					</footer>
				</form>
			</field>
		</record>

		<record model="ir.ui.view" id="view_logistik_spp_form">
			<field name="name">logistik.spp.form</field>
			<field name="model">logistik.spp</field>
			<field name="type">form</field>
			<field name="arch" type="xml">
				<form string="Pengelolaan SPP">
					<header>
						<button name="action_draft" string="Konsep SPPH" confirm="Apakah benar SPP ini akan dijadikan menjadi konsep?" help="Menjadikan SPPH ini menjadi konsep SPPH" type="object" states="sent,confirm"/>
						<button name="action_spph_send" string="Kirim e-mail" type="object" states="sent,confirm" icon=" fa-envelope" groups="base.group_no_one"/>
						<button name="action_print_spp" string="SPPH" icon="fa-print" help="Cetak Surat Permintaan Harga" type="object" states="draft" class="oe_highlight"/>
						<button name="action_print_spp" string="SPPH" icon="fa-print" help="Cetak Surat Permintaan Harga" type="object" states="sent,confirm,order"/>
						<button name="action_cancel" confirm="Pembatalan SPP akan mengemembalikan SPM menjadi belum di-golongkan. Apakah benar SPP ini akan Di-Batalkan?" string="Batalkan SPPH dan SPM" help="Batalkan SPPH ini sekaligus Penggolongan SPM-nya" type="object" states="draft,sent"/>
						<button name="action_confirm" string="SPPH Diterima" type="object" states="sent"  class="oe_highlight"/>
						<button name="action_print_harga" string="Hasil Nego" icon="fa-print" help="Cetak Rekap Harga Hasil negosiasi" type="object" states="confirm"  class="oe_highlight"/>
						<button name="action_print_harga" string="Hasil Nego" icon="fa-print" help="Cetak Rekap Harga Hasil negosiasi" type="object" states="order"/>
						<button name="action_dummy" string="Re-Load" type="object" states="draft" class="oe_highlight"/>
						<button name="action_create_draft_po" attrs="{'invisible': ['|', ('golongan','=', 'tender'), ('state', '!=', 'confirm')]}" string="Buat Konsep SP" class="oe_highlight" type="object"/>
						<field name="state" widget="statusbar"/>
					</header>
					<sheet>
						<h1>
							<label string="Surat Permintaan Penawaran Harga"/>
						</h1>
						<hr/>
						<group>
							<group>
								<field name="company_id" invisible="1"/>
								<field name="no_spp" readonly="1"/> <!-- attrs="{'readonly':[('state','!=', 'draft')]}"/> -->
								<field name="tanggal" attrs="{'readonly':[('state','!=', 'draft')]}"/>
<!-- 								<h3 colspan="2">
									<label string="Penyerahan Penawaran Paling lambat"/>
								</h3>
 -->							<field name="tgl_serah" string="Batas Penawaran" required="1" attrs="{'readonly':[('state','!=', 'draft')]}"/>
								<!-- <field name="jam_serah" string="Jam" widget="float_time" attrs="{'readonly':[('state','!=', 'draft')]}"/> -->
-- 								<h3 colspan="2">
									<label string="Penyerahan Barang"/>
								</h3>
								<field name="delivery_to" string="Tempat" readonly="1"/> <!-- attrs="{'readonly':[('state','!=', 'draft')]}"/> -->
								<field name="delivery_date" string="Tanggal" required="1" attrs="{'readonly':[('state','!=', 'draft')]}"/>
								<separator/>
							</group>
							<group>
								<field name="partner_id" readonly="1"/>
								<field name="no_penawaran" class="oe_text_upper" attrs="{'readonly':[('state','!=', 'sent')], 'required':[('state', '=', 'sent')]}"/>
								<field name="tgl_penawaran" attrs="{'readonly':[('state','!=', 'sent')], 'required':[('state', '=', 'sent')]}"/>
								<separator/>
								<h3  colspan="2">
									<label string="Sumber SPM"/>
								</h3>
								<field name="spm_id" string="Nomor"/>
								<field name="tanggal_spm" string="Tanggal"/>
								<field name="golongan"/>
							</group>
						</group>
						<group>
							<field name="line_ids" colspan="6" nolabel="1" attrs="{'readonly':[('state','in', ['confirm', 'order', 'cancel'])]}">
								<tree create="false" delete="false" editable="bottom">
									<button name="action_open_histori_harga" type="object" string="Histori Harga" context="{'product_id': product_id}" icon="fa-list"/>
									<field name="product_id" readonly="1"/>
									<field name="spesifikasi"/>
									<field name="lst_price"/>
									<button name="%(ka_logistik_master.action_product_update_hps)d" groups="ka_logistik_pengadaan.group_logistik" type="action" string="Update HPS" icon="fa-repeat"/>
									<field name="penyerahan" string="Tgl. Diminta" readonly="1"/>
									<field name="waktu_kirim"/>
									<field name="kuantum"/>
									<field name="kuantum_sp" invisible="1"/>
									<field name="unit_id" readonly="1"/>
									<field name="penawaran" data-inputmask="'alias': 'decimal', 'groupSeparator': ',', 'radixPoint':'.', 'autoGroup': true"/>
									<!-- <field name="harga" data-inputmask="'alias': 'decimal', 'groupSeparator': '.', 'radixPoint':',', 'autoGroup': true, 'autounmask':true"/> -->
									<field name="harga"/>
									<field name="total_harga"/>
									<field name="keterangan"/>
								</tree>
							</field>
							<group class="oe_subtotal_footer oe_right">
								<field name="total" widget="monetary" class="oe_subtotal_footer_separator" />
							</group>
						</group>
						<!--field name="golongan" widget="statusbar"/-->
					</sheet>
					<div class="oe_chatter">
						<field name="message_follower_ids" widget="mail_followers"/>
						<field name="message_ids" widget="mail_thread"/>
					</div>
				</form>
			</field>
		</record>

		<!-- Menu dan action Penawaran Harga / SPPH-->
		<record model="ir.actions.act_window" id="action_logistik_spp_agen_draft_tree">
			<field name="name">Konsep</field>
			<field name="res_model">logistik.spp</field>
			<field name="view_type">form</field>
			<field name="view_mode">form,tree</field>
			<field name="domain">[('golongan', '=', 'agen')]</field>
			<field name="context">{'search_default_draft':1}</field>
			<field name="view_id" ref="view_logistik_spp_tree"/>
			<field name="search_view_id" ref="view_logistik_spp_filter"/>
		</record>
		<record model="ir.actions.act_window" id="action_logistik_spp_agen_sent_tree">
			<field name="name">Tunggu Harga</field>
			<field name="res_model">logistik.spp</field>
			<field name="view_type">form</field>
			<field name="view_mode">form,tree</field>
			<field name="domain">[('golongan', '=', 'agen')]</field>
			<field name="context">{'search_default_sent':1}</field>
			<field name="view_id" ref="view_logistik_spp_tree"/>
			<field name="search_view_id" ref="view_logistik_spp_filter"/>
		</record>
		<record model="ir.actions.act_window" id="action_logistik_spp_agen_confirm_tree">
			<field name="name">Harga Sudah Diterima</field>
			<field name="res_model">logistik.spp</field>
			<field name="view_type">form</field>
			<field name="view_mode">form,tree</field>
			<field name="domain">[('golongan', '=', 'agen')]</field>
			<field name="context">{'search_default_confirm':1}</field>
			<field name="view_id" ref="view_logistik_spp_tree"/>
			<field name="search_view_id" ref="view_logistik_spp_filter"/>
		</record>
		<record model="ir.actions.act_window" id="action_logistik_spp_agen_order_tree">
			<field name="name">Sudah SP</field>
			<field name="res_model">logistik.spp</field>
			<field name="view_type">form</field>
			<field name="view_mode">form,tree</field>
			<field name="domain">[('golongan', '=', 'agen')]</field>
			<field name="context">{'search_default_order':1}</field>
			<field name="view_id" ref="view_logistik_spp_tree"/>
			<field name="search_view_id" ref="view_logistik_spp_filter"/>
		</record>

		<!-- Menu dan action Repeat Order-->
		<record model="ir.actions.act_window" id="action_logistik_spp_repeat_draft_tree">
			<field name="name">Konsep</field>
			<field name="res_model">logistik.spp</field>
			<field name="view_type">form</field>
			<field name="view_mode">form,tree</field>
			<field name="domain">[('golongan', '=', 'repeat')]</field>
			<field name="context">{'search_default_draft':1}</field>
			<field name="view_id" ref="view_logistik_spp_tree"/>
			<field name="search_view_id" ref="view_logistik_spp_filter"/>
		</record>
		<record model="ir.actions.act_window" id="action_logistik_spp_repeat_sent_tree">
			<field name="name">Tunggu Harga</field>
			<field name="res_model">logistik.spp</field>
			<field name="view_type">form</field>
			<field name="view_mode">form,tree</field>
			<field name="domain">[('golongan', '=', 'repeat')]</field>
			<field name="context">{'search_default_sent':1}</field>
			<field name="view_id" ref="view_logistik_spp_tree"/>
			<field name="search_view_id" ref="view_logistik_spp_filter"/>
		</record>
		<record model="ir.actions.act_window" id="action_logistik_spp_repeat_confirm_tree">
			<field name="name">Harga Sudah Diterima</field>
			<field name="res_model">logistik.spp</field>
			<field name="view_type">form</field>
			<field name="view_mode">form,tree</field>
			<field name="domain">[('golongan', '=', 'repeat')]</field>
			<field name="context">{'search_default_confirm':1}</field>
			<field name="view_id" ref="view_logistik_spp_tree"/>
			<field name="search_view_id" ref="view_logistik_spp_filter"/>
		</record>
		<record model="ir.actions.act_window" id="action_logistik_spp_repeat_order_tree">
			<field name="name">Sudah SP</field>
			<field name="res_model">logistik.spp</field>
			<field name="view_type">form</field>
			<field name="view_mode">form,tree</field>
			<field name="domain">[('golongan', '=', 'repeat')]</field>
			<field name="context">{'search_default_order':1}</field>
			<field name="view_id" ref="view_logistik_spp_tree"/>
			<field name="search_view_id" ref="view_logistik_spp_filter"/>
		</record>
	</data>
</odoo>