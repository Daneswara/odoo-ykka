<odoo>
	<data>
		<record model="ir.ui.view" id="view_ka_plantation_register_filter">
			<field name="name">ka_plantation.register.filter</field>
			<field name="model">ka_plantation.register</field>
			<field name="type">search</field>
			<field name="arch" type="xml">
				<search string="Pencarian">
					<field name="no_register"/>
					<field name="name" attrs="{'invisible':[('register_type', '!=', 'ts')]}"/>
					<field name="farmer_id"/>
					<field name="kud_id"/>
					<!-- <field name="employee_id"/> -->
					<group expand="0" string="Golongan">
						<filter name="draft" string="Draft" domain="[('state','=','draft')]"/>
						<filter name="propose" string="Propose" domain="[('state','=','propose')]"/>
						<filter name="approve" string="Approve" domain="[('state','=','approve')]"/>
					</group>
				</search>
			</field>
		</record>

		<record model="ir.ui.view" id="area_pivot_view">
            <field name="name">ka.plantation.pivot.register</field>
            <field name="model">ka_plantation.register</field>
            <field name="arch" type="xml">
                <pivot string="Pivot Register" type="pivot">
                    <field name="luas" type="measure"/>
                </pivot>
            </field>
        </record>

		<record model="ir.ui.view" id="view_form_register">
			<field name="name">Form Register</field>
			<field name="sequence" eval="0"/>
			<field name="model">ka_plantation.register</field>
			<field name="arch" type="xml">
				<form string="Form Register">
					<header>
						<button name="action_set_draft" string="Jadikan Konsep" type="object" states="propose"/>
						<button name="action_propose" string="Pengajuan" type="object" states="draft" class="oe_highlight"/>
						<button name="action_approve" string="Approve" type="object" states="propose"/>
						<field name="state" widget="statusbar"/>
					</header>                
					<sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="no_register" default_focus="1" placeholder="No Register"/>
                            </h1>
                        </div>
						<group>
							<group>
								<field name="name" attrs="{'invisible':[('register_type', '!=', 'ts')]}"/>
								<field name="farmer_id"/>
								<field name="kud_id" attrs="{'invisible':[('register_type', '==', 'ts')]}"/>
								<field name="mandor_id" domain="[('company_id', '=', company_id)]"/>
								<field name="plpg_id" domain="[('company_id', '=', company_id)]"/>
								<field name="manager_id" domain="[('company_id', '=', company_id)]"/>
								<field name="contract_id" attrs="{'invisible':[('register_type', '!=', 'ts')]}"/>
							</group>
							<group>
								<field name="company_id" groups="base.group_multi_company"/>
								<field name="mtt_id"  readonly="1"/>
								<field name="session_id"/>
								<field name="register_type" invisible="1"/>
								<field name="luas" invisible="1"/>
								<field name="taks_produksi" invisible="1"/>
								<field name="tergiling_ku" invisible="1"/>
								<field name="sisa_ku" invisible="1"/>
								<field name="is_rekanan"/>
							</group>
						</group>
						<notebook>
							<page string="Daftar Petak">
								<field name="register_line_ids" context="{'default_mtt_id':mtt_id}">
									<tree>
										<field name="area_id"/>
										<field name="desa_id"/> 
										<field name="luas" sum="Total Luas"/>
										<field name="taks_produksi" sum="Total Taks. Produksi"/>
										<field name="varietas_id"/>
										<field name="intensifikasi_id"/>
										<field name="tanam_periode_id"/>
										<field name="tebang_periode_id"/> 
										<field name="tergiling_ku" sum="Total Tergiling"/>
										<field name="sisa_ku" sum="Total Sisa"/>
									</tree>
									<form>
										<group>
											<group>
												<field name="area_id" domain="[('status_polygon','=','valid')]"/>
												<field name="desa_id" readonly="1"/>
												<field name="luas"/>
												<field name="taks_produksi"/>
												<field name="varietas_id"/>
												<field name="intensifikasi_id"/>
											</group>
											<group>
												<field name="tanam_periode_id"/>
												<field name="tebang_periode_id"/>
												<field name="tergiling_ku"/>
												<field name="sisa_ku"/>
												<field name="mtt_id" readonly="1"/>
											</group>
										</group>
									</form>
								</field>
							</page>
						</notebook>
					</sheet>
					<div class="oe_chatter">
						<field name="message_follower_ids" widget="mail_followers"/>
						<field name="message_ids" widget="mail_thread"/>
					</div>
				</form>
			</field>
		</record>

		<record model="ir.ui.view" id="view_tree_register">
			<field name="name">Data Register</field>
			<field name="model">ka_plantation.register</field>
			<field name="arch" type="xml">
				<tree>
					<field name="no_register"/>
					<field name="name" invisible="1"/>
					<field name="farmer_id"/>
					<!-- <field name="employee_id"/> -->
					<field name="luas"/>
					<field name="taks_produksi"/>
					<field name="tergiling_ku"/>
					<field name="sisa_ku"/>
					<field name="company_id" groups="base.group_multi_company"/>
				</tree>
			</field>
		</record>

		<record model="ir.actions.act_window" id="action_register">
			<field name="name">Pendaftaran Register</field>
			<field name="res_model">ka_plantation.register</field>
			<field name="view_type">form</field>
			<field name="view_id" ref="view_tree_register"/>
			<field name="view_mode">tree,form,pivot</field>
			<field name="help" type="html">
				<p class="oe_view_nocontent_create">Data register masih kosong. Input terlebih dahulu.</p>
			</field>
		</record>

		<record model="ir.ui.view" id="view_tree_register_ts">
			<field name="name">Data Register</field>
			<field name="model">ka_plantation.register</field>
			<field name="arch" type="xml">
				<tree create="false">
					<field name="no_register"/>
					<field name="name"/>
					<field name="farmer_id"/>
					<!-- <field name="employee_id"/> -->
					<field name="luas"/> 
					<field name="taks_produksi" invisible="1"/>
					<field name="tergiling_ku"/>
					<field name="sisa_ku"/>
					<field name="company_id" groups="base.group_multi_company"/>
				</tree>
			</field>
		</record>

		<record model="ir.actions.act_window" id="action_register_ts">
			<field name="name">Pendaftaran Register</field>
			<field name="res_model">ka_plantation.register</field>
			<field name="view_type">form</field>
			<field name="view_id" ref="view_tree_register_ts"/>
			<field name="view_mode">tree,form,pivot</field>
			<field name="help" type="html">
				<p class="oe_view_nocontent_create">Data register masih kosong. Input terlebih dahulu.</p>
			</field>
		</record>

		<record model="ir.ui.view" id="view_form_register_readonly">
			<field name="name">Form Register</field>
			<field name="sequence" eval="0"/>
			<field name="model">ka_plantation.register</field>
			<field name="arch" type="xml">
				<form string="Form Register" create="false" edit="false" delete="false">
					<header>
						<button name="action_set_draft" string="Jadikan Konsep" type="object" states="propose"/>
						<button name="action_propose" string="Pengajuan" type="object" states="draft" class="oe_highlight"/>
						<button name="action_approve" string="Approve" type="object" states="propose"/>
						<field name="state" widget="statusbar"/>
					</header>                
					<sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="no_register" default_focus="1" placeholder="No Register"/>
                            </h1>
                        </div>
						<group>
							<group>
								<field name="name" attrs="{'invisible':[('register_type', '!=', 'ts')]}"/>
								<field name="farmer_id"/>
								<field name="kud_id" attrs="{'invisible':[('register_type', '==', 'ts')]}"/>
								<field name="mandor_id" domain="[('company_id', '=', company_id)]"/>
								<field name="plpg_id" domain="[('company_id', '=', company_id)]"/>
								<field name="manager_id" domain="[('company_id', '=', company_id)]"/>
								<field name="contract_id" attrs="{'invisible':[('register_type', '!=', 'ts')]}"/>
							</group>
							<group>
								<field name="company_id" groups="base.group_multi_company"/>
								<field name="mtt_id"/>
								<field name="session_id"/>
								<field name="register_type" invisible="1"/>
								<field name="luas" invisible="1"/>
								<field name="taks_produksi" invisible="1"/>
								<field name="tergiling_ku" invisible="1"/>
								<field name="sisa_ku" invisible="1"/>
							</group>
						</group>
						<notebook>
							<page string="Daftar Petak">
								<field name="register_line_ids">
									<tree>
										<field name="area_id"/>
										<field name="desa_id"/>
										<field name="luas" sum="Total Luas"/>
										<field name="taks_produksi" sum="Total Taks. Produksi"/>
										<field name="varietas_id"/>
										<field name="intensifikasi_id"/>
										<field name="tanam_periode_id"/>
										<field name="tebang_periode_id"/>
										<field name="tergiling_ku" sum="Total Tergiling"/>
										<field name="sisa_ku" sum="Total Sisa"/>
									</tree>
									<form>
										<group>
											<group>
												<field name="area_id"/>
												<field name="desa_id"/>
												<field name="luas"/>
												<field name="taks_produksi"/>
												<field name="varietas_id"/>
												<field name="intensifikasi_id"/>
											</group>
											<group>
												<field name="tanam_periode_id"/>
												<field name="tebang_periode_id"/>
												<field name="tergiling_ku"/>
												<field name="sisa_ku"/>
											</group>
										</group>
									</form>
								</field>
							</page>
						</notebook>
					</sheet>
					<div class="oe_chatter">
						<field name="message_follower_ids" widget="mail_followers"/>
						<field name="message_ids" widget="mail_thread"/>
					</div>
				</form>
			</field>
		</record>


		<record model="ir.ui.view" id="view_tree_register_readonly">
			<field name="name">Data Register</field>
			<field name="model">ka_plantation.register</field>
			<field name="view_id" ref="view_form_register_readonly"/>
			<field name="arch" type="xml">
				<tree create="false" edit="false" delete="false">
					<field name="no_register"/>
					<field name="name"/>
					<field name="farmer_id"/>
					<!-- <field name="employee_id"/> -->
					<field name="luas"/>
					<field name="taks_produksi"/>
					<field name="tergiling_ku"/>
					<field name="sisa_ku"/>
					<field name="company_id" groups="base.group_multi_company"/>
				</tree>
			</field>
		</record>

		<record model="ir.actions.act_window" id="action_register_readonly">
			<field name="name">Data Register</field>
			<field name="res_model">ka_plantation.register</field>
			<field name="view_type">form</field>
			<field name="view_id" ref="view_tree_register_readonly"/>
			<field name="view_mode">tree,form</field>
			<field name="help" type="html">
				<p class="oe_view_nocontent_create">Data register masih kosong. Input terlebih dahulu.</p>
			</field>
		</record>

		<record id="action_register_readonly_tree" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_tree_register_readonly"/>
            <field name="act_window_id" ref="action_register_readonly"/>
        </record>

        <record id="action_register_readonly_form" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_form_register_readonly"/>
            <field name="act_window_id" ref="action_register_readonly"/>
        </record>

		<record model="ir.ui.view" id="view_form_register_lines">
			<field name="name">Form Daftar Petak</field>
			<field name="model">ka_plantation.register.line</field>
			<field name="arch" type="xml">
				<form create="false">
					<group>
						<group>
							<field name="area_id"/>
							<field name="luas"/>
							<field name="taks_produksi"/>
							<field name="varietas_id"/>
							<field name="intensifikasi_id"/>
						</group>
						<group>
							<field name="tanam_periode_id"/>
							<field name="tebang_periode_id"/>
							<field name="tergiling_ku"/>
							<field name="sisa_ku"/>
						</group>
					</group>
				</form>
			</field>
		</record>

		<record model="ir.ui.view" id="view_tree_register_lines">
			<field name="name">Tree Daftar Petak</field>
			<field name="model">ka_plantation.register.line</field>
			<field name="arch" type="xml">
				<tree create="false">
					<field name="petani"/>
					<field name="area_id"/>
					<field name="luas" sum="luas"/>
					<field name="taks_produksi" sum="taks_produksi"/>
					<field name="varietas_id"/>
					<field name="intensifikasi_id"/>
					<field name="tanam_periode_id"/>
					<field name="tebang_periode_id"/>
				</tree>
			</field>
		</record>

		<record model="ir.ui.view" id="view_register_line_areamap_area">
			<field name="name">ka_plantation.register.line.map</field>
			<field name="model">ka_plantation.register.line</field>
			<field name="arch" type="xml">
				<areamap>
					<field name="register_id"/>   
					<field name="farmer_id"/>
					<field name="luas"/>
					<field name="gps_polygon"/>
				</areamap>
			</field>
		</record>

		<record model="ir.actions.act_window" id="action_register_lines">
			<field name="name">Register Line</field>
			<field name="res_model">ka_plantation.register.line</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form,areamap,pivot</field>
		</record>
	</data>
</odoo>