<odoo>
    <data> 
        <record id="view_ka_account_voucher_tree" model="ir.ui.view">
            <field name="name">ka.account.voucher.tree</field>
            <field name="model">ka_account.voucher</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="name"/>
                    <field name="journal_id"/>
                    <field name="destination_journal_id" invisible="context.get('default_type') != 'internal'"/>
                    <field name="operating_unit_id" invisible="context.get('default_type') != 'intercompany'"/>                    
                    <field name="description"/>
                    <field name="partner_id"/> 
                    <field name="date"/> 
                   	<field name="currency_id" invisible="1"/>
                    <field name="total_amount" string="Total Amount"/>
                    <field name="printed"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>
        
     	<record id="view_ka_account_voucher_filter" model="ir.ui.view">
            <field name="name">ka.account.voucher.select</field>
            <field name="model">ka_account.voucher</field>
            <field name="arch" type="xml">
                <search string="Search Voucher">
                    <field name="name" string="Nomor"/>
                    <field name="journal_id" string="Journal"/>
                    <field name="partner_id" string="Partner"/>
                    <field name="account_id" string="Account"/>
					<filter string="Draft" domain="[('state','=','draft')]" name="draft"/>
					<filter string="Propose" domain="[('state','=','draft')]" name="proposed"/>
					<filter string="Approve" domain="[('state','=','draft')]" name="approved"/>
					<filter string="Post" domain="[('state','=','draft')]" name="posted"/>
               </search>   
            </field>
        </record>
                    
        <record id="view_ka_account_voucher_form" model="ir.ui.view">
            <field name="name">ka.account.voucher.form</field>
            <field name="model">ka_account.voucher</field>
            <field name="arch" type="xml">              
                <form string="KA Voucher" version="7"> 
                    <header>
                        <button name="propose_voucher" states="draft" type="object" class="oe_highlight" string="Propose"/>
                        <button name="set_draft_voucher" states="proposed,approved" type="object" string="Set to Draft"/>
                        <button name="approve_voucher" states="proposed" class="oe_highlight" type="object" string="Approve"/>
                        <button name="posted_voucher" states="proposed,approved" type="object" class="oe_highlight" string="Post" groups="base.group_no_one"/>                          
                        <button name="unposted_voucher" states="posted" type="object" class="oe_highlight" string="Unpost" groups="base.group_no_one"/>
                        <field name="state" widget="statusbar"/> 
                    </header>            
                    <sheet>
                    	<div class="oe_button_box_long" name="button_box"> 
                             <button type="action" string="Slip Setoran" name="%(slip_setoran_kas_keluar)d" class="oe_stat_button"
                                icon="fa-print" attrs="{'invisible': ['|',('type', '!=', 'outbound'), ('state','=', 'draft')]}"/>
                    		 <button type="action" string="Bukti Kas" name="%(slip_penerimaan_kas)d" class="oe_stat_button"
                    		 	icon="fa-print" attrs="{'invisible': [('state','=', 'draft')]}"/>
                             <button type="action" string="Bukti Kas + Template" name="%(slip_penerimaan_kas_plus)d" class="oe_stat_button_long"
                                icon="fa-print" attrs="{'invisible': [('state','=', 'draft')]}"/>
                             
                             <button type="object" string="Payments" name="action_view_vendor_payments" class="oe_stat_button"
                             	icon="fa-bars" attrs="{'invisible': [('ka_payment_ids','=',[])]}"/>
                            <button type="object" string="Export To DBF" name="open_export_dbf_wizard" class="oe_stat_button" icon="fa-external-link" attrs="{'invisible': ['|', ('type', '!=', 'outbound'),('status_export','=',True)]}"/>

                    		 <button type="object" name="action_view_journal_entry" class="oe_stat_button_long" 
                    		 	icon="fa-bars" attrs="{'invisible': [('account_move_id','=',False)]}">
                    		 	<field name="journal_entry_info" widget="statinfo" nolabel="1"/>
                    		 </button>
                    	</div>	 
                        <div class="oe_title">
                            <h1><field name="name" required="1" readonly="0"/></h1>
                        </div>
                        <group>
                            <group>
                                <field name="journal_id" required="1" attrs="{'readonly': [('state','!=','draft')]}"
                                 	domain="[('type','in',('bank','cash'))]" options="{'no_create': True}"/>  
                                <field name="date" required="True" attrs="{'readonly': [('state','!=','draft')]}"/>
                                <field name="date_approve" string="Tanggal Approve" readonly="0" attrs="{'invisible': [('state','in',('draft','proposed'))]}"/>
                                <field name="destination_journal_id" options="{'no_create': True}" domain="[('type','in',('bank','cash'))]"
                                 	attrs="{'invisible': [('type', '!=', 'internal')], 'readonly': [('state','!=','draft')], 'required': [('type', '=', 'internal')]}"/>
                                <field name="description" required="True" attrs="{'readonly': [('state','!=','draft')]}"/>  
                                <field name="company_id" options="{'no_create': True}" groups="base.group_multi_company"/>                              
                            </group>
                            <group>
								<field name="partner_id" options="{'no_create': True}" 
									attrs="{'readonly': [('state','!=','draft')], 'invisible': [('type','in',('internal','intercompany'))], 'required': [('type','!=','internal')]}"/>
								<field name="partner_name" attrs="{'readonly': [('state','!=','draft')]}"/>
								<field name="partner_bank_id" domain="[('partner_id','=',partner_id)]"
                                	attrs="{'readonly': [('state','=','posted')], 'invisible': [('type','in',('internal', 'inbound'))]}"/>
								<field name="partner_bank_acc" attrs="{'readonly': [('state','=','posted')], 'invisible': [('type', '=', 'inbound')]}"/>
                                <field name="operating_unit_id" options="{'no_create': True}" domain="[('is_operating_unit','=','True')]"
                                	attrs="{'invisible': [('type', '!=', 'intercompany')], 'readonly': [('state','!=','draft')], 'required': [('type', '=', 'intercompany')]}"/>                                 
                                <field name="printed" attrs="{'readonly': True}"/>
                                <field name="type" invisible="0"/>
                                <field name="currency_id" invisible="1" options="{'no_create': True}"/>  
                                <field name="account_move_id" invisible="1" options="{'no_create': True}"/>
								<field name="ka_payment_ids" invisible="1"/>
                                <field name="status_export" invisible="1"/>
                            </group>
                        </group>
                        <field name="voucher_lines" context="{'type':context.get('default_type'),'desc': description, 'op_unit': operating_unit_id, 'invoice_type': context.get('invoice_type')}" attrs="{'readonly': [('state','!=','draft')]}"> 
                            <tree string="Voucher lines" editable="bottom">
                                <field name="account_id" options="{'no_create': True}" required="1"/>
                                <field name="account_template_id" options="{'no_create': True}" required="context.get('default_type', False) == 'intercompany'" invisible="context.get('default_type', False) != 'intercompany'"/>     
                                <field name="invoice_id" options="{'no_create': True}" invisible="context.get('default_type') not in ('inbound', 'outbound')" 
                                	domain="[('state','=','open'), '|', ('partner_id', '=',parent.partner_id), ('source_partner_id', '=',parent.partner_id)]"/>
                                <field name="name" required="True"/>
                                <field name="analytic_account_id" options="{'no_create': True}" domain="[('company_id', '=', company_id)]"/>     
                                <field name="ka_payment_id" invisible="1"/>                        
                                <field name="company_id" invisible="1"/>                        
                                <field name="amount" required="True"/>
                                <field name="currency_id" invisible="1" options="{'no_create': True}"/>                               
                            </tree>
                        </field>
                        <group>
                            <group class="oe_subtotal_footer oe_right">
                                <field name="total_amount" class="oe_subtotal_footer_separator" attrs="{'readonly': True}"/>
                            </group>
                        </group>  
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers"/>
                        <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>               
                
        <record id="action_open_kas_masuk" model="ir.actions.act_window">
            <field name="name">Kas Masuk</field>
            <field name="res_model">ka_account.voucher</field>
            <field name="view_type">form</field> 
            <field name="view_mode">tree,form</field>  
            <field name="domain">[('type','=','inbound')]</field>
            <field name="context">{'default_type': 'inbound', 'invoice_type': 'out_invoice'}</field>                   
        </record>
        
        <record id="action_open_kas_keluar" model="ir.actions.act_window">
            <field name="name">Kas Keluar</field>
            <field name="res_model">ka_account.voucher</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('type','=','outbound')]</field>
            <field name="context">{'default_type': 'outbound', 'invoice_type': 'in_invoice'}</field>                     
        </record>
        
   		<record id="action_open_kas_keluar_rk" model="ir.actions.act_window">
            <field name="name">Kas Keluar R/K</field>
            <field name="res_model">ka_account.voucher</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('type','=','intercompany')]</field>
            <field name="context">{'default_type': 'intercompany', 'invoice_type': 'in_invoice'}</field>                     
        </record>
        
        <record id="action_open_internal_transfer" model="ir.actions.act_window">
            <field name="name">Internal Transfer</field>
            <field name="res_model">ka_account.voucher</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('type','=','internal')]</field>
            <field name="context">{'default_type': 'internal'}</field>                         
        </record>

        <record id="action_open_memorial_umum" model="ir.actions.act_window">
            <field name="name">Memorial Umum</field>
            <field name="res_model">account.move</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('journal_id.type','not in',('bank','cash'))]</field>                      
        </record>
        
        <act_window
            id="action_print_selected_voucher" 
            name="Print Bukti Penerimaan/Pengeluaran Kas"
            src_model="ka_account.voucher"
            res_model="ka_account.voucher.print.wizard" 
            view_mode="form"
            multi="True"
            target="new"
            key2="client_action_multi"/> 
        
        <menuitem id="menu_journal_voucher" name="Journal Voucher" parent="account.menu_finance" sequence="1"/>
        <menuitem id="menu_kas_masuk" name="Kas Masuk" parent="menu_journal_voucher" action="action_open_kas_masuk" sequence="1"/>
        <menuitem id="menu_kas_keluar" name="Kas Keluar" parent="menu_journal_voucher" action="action_open_kas_keluar" sequence="2"/>
        <menuitem id="menu_kas_keluar_rk" name="Kas Keluar R/K" parent="menu_journal_voucher" action="action_open_kas_keluar_rk" sequence="3"/>
        <menuitem id="menu_internal_transfer" name="Internal Transfer" parent="menu_journal_voucher" action="action_open_internal_transfer" sequence="4"/>
        <menuitem id="menu_memorial_umum" name="Memorial Umum" parent="menu_journal_voucher" action="action_open_memorial_umum" sequence="5"/>      

    </data>
</odoo>