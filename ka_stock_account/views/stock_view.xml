<odoo>
	<data>
	  <record id="view_stock_form" model="ir.ui.view">
	    <field name="name">stock.picking.inherit.form</field>
	    <field name="model">stock.picking</field>
	    <field name="inherit_id" ref="stock.view_picking_form"/>
	    <field name="arch" type="xml">
	    	<button name="do_new_transfer" position="attributes">
	    		<attribute name="states">partially_available,assigned</attribute>
	    	</button>
	    	<button name="force_assign" position="attributes">
	    		<attribute name="states"></attribute>
	    		<attribute name="attrs">{'invisible': ['|',('picking_type_code','!=','outgoing'),('state','not in',('confirmed','waiting','partially_available'))]}</attribute>
	    	</button>
	    	<button name="action_cancel" position="attributes">
	            <attribute name="confirm">Are you sure to cancel this record?</attribute>  
	        </button>
	    	<button name="button_scrap" position="attributes">
	            <attribute name="confirm">Are you sure to scrap this operation?</attribute>  
	        </button>
	    	<field name="location_dest_id" position="after">
	    		<field name="location_dest_usage" invisible="1"/>
	    		<field name="using_analytic_pkrat" invisible="1"/>
	    		<field name="date_printed" invisible="1"/>
	    		<field name="total_product_qty_manual" attrs="{'readonly': [('state','=','done')], 'required': [('using_analytic_pkrat','=',True)], 'invisible': [('using_analytic_pkrat','=',False)]}"/>
	    		<field name="total_product_code_manual" attrs="{'readonly': [('state','=','done')], 'required': [('using_analytic_pkrat','=',True)], 'invisible': [('using_analytic_pkrat','=',False)]}"/>
	    	</field>
	    	<field name="origin" position="after">
	    		<field name="date_printed" invisible="1"/>
	    		<field name="total_product_qty" attrs="{'invisible': [('using_analytic_pkrat','=',False)]}"/>
	    		<field name="total_product_code" attrs="{'invisible': [('using_analytic_pkrat','=',False)]}"/>
	    		<field name="last_sequence_pemakaian" invisible="1"/>
	    		<field name="last_product_input" invisible="1"/>
	    		<field name="last_account_input" invisible="1"/>
	    		<field name="last_account_analytic_input" invisible="1"/>
	    	</field>
	    	
	    	<field name="move_lines" position="attributes">
	    		<attribute name="context">
	    		{
	    			'address_in_id': partner_id, 
	    			'form_view_ref':'stock.view_move_picking_form', 
	    			'tree_view_ref':'stock.view_move_picking_tree', 
	    			'default_picking_type_id': picking_type_id, 
	    			'default_location_id': location_id, 
	    			'default_location_dest_id': location_dest_id,
	    			'last_sequence_pemakaian': last_sequence_pemakaian,
	    			'last_product_input': last_product_input,
	    			'last_account_input': last_account_input,
	    			'last_account_analytic_input': last_account_analytic_input,
	    		}
	    		</attribute>
	    	</field>
	    	
	    	<field name="note" position="attributes">
	    		<attribute name="attrs">{'readonly': [('state','=','done')]}</attribute>
	    	</field>
	
	        <button name="action_see_move_scrap" position="before">
	            <button type="object" name="print_report_stock_product" string="Penerimaan" icon="fa-print" class="oe_inline oe_stat_button" help="Cetak barang di terima untuk di periksa"
	                attrs="{'invisible': ['|','|',('picking_code_type', '!=','incoming'),('state','not in','done'),('is_return_picking','=',True)]}"/> 
	            <button type="action" name="%(report_stock_return_supplier)d" string="Penolakan" icon="fa-print" class="oe_inline oe_stat_button" help="Cetak barang yang dikembalikan ke supplier"
	                attrs="{'invisible': ['|','|',('picking_code_type','!=','incoming'),('state','not in','done'),('is_return_picking','=',False)]}"/> 
	            <field name="picking_code_type" invisible="1"/>      
	        </button>
	        
	        <xpath expr="//page[1]//field[@name='product_qty']" position="after">
	            <field name="picking_code" invisible="1"/>
	            <field name="reject" readonly="1" attrs="{'invisible': ['|',('picking_code', '!=','internal'),('state','in','done')]}" />
	            <button name="show_rejects" string="Modify Reject" type="object" icon="fa-pencil-square-o btn-danger" groups="stock.group_stock_multi_locations" attrs="{'invisible': ['|',('picking_code', '!=','internal'),('state','in','done')]}"/>
	        </xpath>
	
	    </field>
	  </record>
	
	  <record id="view_pack_operation_reject_form" model="ir.ui.view">
	        <field name="name">stock.pack.operation.reject.form</field>
	        <field name="model">stock.pack.operation</field>
	        <field eval="12" name="priority"/>
	        <field name="arch" type="xml">
	            <form>
	                <group name="qty_to">
	                    <group string="Products">
	                        <field name="lots_visible" invisible="1"/>
	                        <field name="picking_source_location_id" invisible="1"/>
	                        <field name="picking_destination_location_id" invisible="1"/>
	                        <field name="product_id" attrs="{'required': [('package_id', '=', False)]}" readonly="1"/>
	                        <label for="reject"/>
	                        <div>
	                            <field name="reject" nolabel="1"  attrs="{'readonly': [('lots_visible','=',True)]}" class="oe_inline"/>
	                            /
	                            <field name="product_qty" class="oe_inline" readonly="1"/>
	
	                            <field name="product_uom_id" options="{'no_open': True, 'no_create': True}" groups="product.group_uom" class="oe_inline"/>
	                        </div>
	                        <field name="alasan" required="1"/>
	                    </group>
	                    <group string="Locations" groups="stock.group_stock_multi_locations">
	                        <field name="location_id" domain="[('id', 'child_of', picking_source_location_id)]"/>
	                        <field name="location_dest_id" domain="[('id', 'child_of', picking_destination_location_id)]"/>
	                    </group>
	                    <group string="Packages" groups="stock.group_tracking_lot">
	                        <field name="package_id" attrs="{'required': [('product_id', '=', False)]}" domain="[('location_id', '=', location_id)]" context="{'default_location_id': location_id}"/>
	                        <field name="result_package_id" domain="[('location_id', '=', location_dest_id)]" context="{'default_location_id': location_dest_id}"/>
	                    </group>
	                </group>
	            </form>
	        </field>
	    </record>
	
	  <record id="view_pack_reject_form_save" model="ir.ui.view">
	        <field name="name">stock.pack.reject.form.save</field>
	        <field name="model">stock.pack.operation</field>
	        <field name="mode">primary</field>
	        <field name="inherit_id" ref="ka_stock_account.view_pack_operation_reject_form"/>
	        <field eval="15" name="priority"/>
	        <field name="arch" type="xml">
	            <group name="qty_to" position="after">
	                <footer>
	                    <button name="save_reject" type="object" string="Save" class="oe_highlight"/>
	                    <button string="Discard" special="cancel"/>
	                </footer>
	            </group>
	            
	        </field>
	    </record>
	
	    <record id="pack_details" model="ir.actions.act_window">
	        <field name="name">Pack Details</field>
	        <field name="type">ir.actions.act_window</field>
	        <field name="res_model">stock.pack.operation</field>
	        <field name="view_id" ref="view_pack_reject_form_save"/>
	        <field name="view_type">form</field>
	        <field name="view_mode">form</field>
	        <field name="target">new</field>
	        <field name="context">{}</field>
	    </record>
	
		<record id="stock_picking_type_inherit" model="ir.ui.view">
		    <field name="name">stock.picking.type.inherit</field>
		    <field name="model">stock.picking.type</field>
		    <field name="inherit_id" ref="stock.view_picking_type_form"/>
		    <field name="arch" type="xml">
		    	<field name="warehouse_id" position="after">
		    		<field name="is_do_kontrak_a"/>
		    		<field name="default_partner_id" attrs="{'invisible': [('is_do_kontrak_a','=',False)], 'required': [('is_do_kontrak_a','=',True)]}"/>
					<field name="is_using_analytic_pkrat"/>	  
		    	</field>
		    </field>
	  </record>
	</data>
</odoo>
